# AI 助手页面使用指南

## 功能概述

AI 助手页面提供了一个智能对话界面，让用户可以通过自然语言与系统交互，执行各种操作，如添加录制器、上传视频等。

## 页面位置

在主导航菜单中点击 **"AI 助手"** 图标（星星图标）即可访问。

## 主要功能

### 1. 会话管理

- **自动创建会话**：打开页面时自动创建新会话
- **新建会话**：点击右上角"新建会话"按钮
- **重置会话**：清除当前对话历史和收集的参数
- **会话状态**：顶部显示会话连接状态

### 2. 对话交互

#### 发送消息

- 在底部输入框输入您的指令
- 按 **Enter** 键发送
- 按 **Shift + Enter** 换行
- 点击"发送"按钮也可以发送

#### 快捷命令

页面为空时，可以点击预设的快捷命令：

- **添加录制器**
- **上传视频**

#### 消息类型

- **用户消息**：右侧显示，紫色渐变背景
- **AI 回复**：左侧显示，灰色背景
- **状态标签**：显示当前对话状态（识别意图、收集参数、等待确认等）
- **详细信息**：某些回复会包含可展开的详细数据

### 3. 技能管理

- **查看技能**：底部显示当前可用的技能列表
- **重新加载**：点击"重新加载技能"按钮刷新技能列表

## 使用示例

### 示例 1：添加录制器（完整参数）

```
用户: 帮我添加一个录制器，地址是 https://live.bilibili.com/123456
AI: 请确认以下信息：
    - 直播间链接: https://live.bilibili.com/123456
    是否确认执行？（回复"是"或"否"）
用户: 是
AI: 成功添加直播间录制器：https://live.bilibili.com/123456
```

### 示例 2：添加录制器（缺少参数）

```
用户: 我想添加一个录制器
AI: 好的，我将帮您添加直播间录制器。
    请提供 url（直播间链接）
用户: https://live.bilibili.com/123456
AI: 请确认以下信息：
    - 直播间链接: https://live.bilibili.com/123456
    是否确认执行？
用户: 确认
AI: 成功添加直播间录制器：https://live.bilibili.com/123456
```

### 示例 3：取消操作

```
用户: 添加录制器 https://live.bilibili.com/123456
AI: 请确认以下信息：...
用户: 不，取消
AI: 操作已取消。如需帮助，请告诉我您想做什么。
```

## 状态说明

对话过程中可能显示以下状态：

| 状态       | 说明                   | 颜色 |
| ---------- | ---------------------- | ---- |
| 空闲       | 等待用户输入           | 默认 |
| 识别意图中 | 正在识别用户想要做什么 | 蓝色 |
| 收集参数中 | 正在收集必需的参数     | 黄色 |
| 等待确认   | 等待用户确认操作       | 黄色 |
| 执行中     | 正在执行操作           | 蓝色 |
| 已完成     | 操作成功完成           | 绿色 |
| 错误       | 发生错误               | 红色 |

## 支持的技能

### 1. addRecorder - 添加录制器

**功能**：添加直播间录制器

**必需参数**：

- `url`: 直播间链接

**示例指令**：

- "帮我添加一个录制器，地址是 https://live.bilibili.com/123456"
- "添加录制器 https://live.bilibili.com/123456"
- "我想录制这个直播间 https://live.bilibili.com/123456"

### 2. uploadVideoToBilibli - 上传视频到 B 站

**功能**：将本地视频文件上传至 Bilibili

**必需参数**：

- `filePath`: 视频本地文件路径

**示例指令**：

- "上传视频 /path/to/video.mp4"
- "把这个视频上传到B站 /path/to/video.mp4"

## 注意事项

1. **会话超时**：会话在 30 分钟无活动后会自动过期
2. **参数重试**：每个参数最多重试 3 次，超过后会自动取消操作
3. **LLM 配置**：需要在设置中配置通义千问 API 密钥
4. **网络连接**：需要连接到后端服务器
5. **权限验证**：所有操作都需要通过认证

## 界面元素

### 顶部区域

- **标题**：AI 智能助手
- **状态标签**：会话连接状态（已连接/未连接）
- **操作按钮**：重置会话、新建会话

### 消息区域

- **消息列表**：显示完整的对话历史
- **自动滚动**：新消息出现时自动滚到底部
- **加载动画**：AI 思考时显示加载指示

### 输入区域

- **多行输入框**：支持自动调整高度（2-4行）
- **技能显示**：显示当前可用的技能
- **操作按钮**：重新加载技能、发送消息

## 快捷键

- **Enter**: 发送消息
- **Shift + Enter**: 换行
- **Esc**: 清空输入框（需要在输入框焦点时）

## 移动端适配

页面已适配移动端显示：

- 响应式布局
- 触摸友好的按钮大小
- 优化的字体大小
- 适应不同屏幕宽度的消息气泡

## 常见问题

### Q: 为什么显示"会话不存在或已过期"？

A: 会话在 30 分钟无活动后会自动过期，请点击"新建会话"创建新的对话。

### Q: AI 没有理解我的指令怎么办？

A: 尝试更清晰、更具体地描述您的需求，或者参考示例指令格式。

### Q: 参数提取失败怎么办？

A: 系统会最多重试 3 次，如果仍然失败，请重新开始对话并提供更明确的参数。

### Q: 如何取消正在进行的操作？

A: 在确认步骤时回复"否"、"不"、"取消"等词语即可取消操作。

### Q: 支持哪些自然语言？

A: 主要支持中文，部分英文指令也可以识别。

## 技术细节

- **前端框架**: Vue 3 + Naive UI
- **状态管理**: 本地状态（ref/reactive）
- **API 通信**: Axios
- **实时更新**: 自动滚动、状态同步
- **错误处理**: 完整的错误提示和日志记录

## 未来计划

- [ ] 语音输入支持
- [ ] 多模态交互（图片、文件）
- [ ] 更多内置技能
- [ ] 会话历史记录
- [ ] 快捷命令自定义
- [ ] 技能市场

## 反馈与建议

如有任何问题或建议，请通过以下方式反馈：

- GitHub Issues
- 项目讨论区
- 邮件联系
